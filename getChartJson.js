var objToSend = {
    chartType: "Pie Chart",
    reportObjDetails: {
        "isGrandTotalRequired": false,
        "isSubTotalRequired": false,
        "isLazyLoadingRequired": true,
        "pageIndex": 1,
        "isGNG": false,
        "isGaugeGNG": false,
        "isRangeRedToGreenColor": false,
        "isPercentageEnabledSummaryCard": false,
        "filterExpression": "",
        "lstSortReportObject": [
            {
                "reportObject": {
                    "displayName": "Spend In USD",
                    "reportObjectName": "Spend In USD",
                    "isDerived": false,
                    "isFilterable": false,
                    "isTransactional": false,
                    "layoutArea": 2,
                    "objectGroupName": "Measure",
                    "reportObjectId": "7f54e1b6-fac9-4f8a-b092-aa9a8ee984bb",
                    "reportObjectType": 0,
                    "sequenceNumber": 71,
                    "isDrillToTransactional": false,
                    "drillTransactionOrder": 3,
                    "isSelectAll": false,
                    "partialSelect": false,
                    "showSelected": false,
                    "filterBy": 1,
                    "filterTabInfo": "",
                    "filterRadioOperator": 0,
                    "filterConditionValue": "",
                    "filterConditionRangeValue": {
                        "from": "",
                        "to": ""
                    },
                    "filterConditionOperator": -1,
                    "selectAllTxt": "All",
                    "filterList": [],
                    "preCanValues": [],
                    "filterCount": -1,
                    "isFilterDataLoaded": false,
                    "filterType": 2,
                    "currentDrop": "VALUE",
                    "isFiltered": false,
                    "filterConditions": [],
                    "periodFilterConditions": [],
                    "filterConditionText": "",
                    "filterSearchText": "",
                    "selectedFilterList": [],
                    "filterValueSet": false,
                    "setPeriodFilterData": false,
                    "filterSelSet": false,
                    "filterCdnSet": false,
                    "allRequiredData": [],
                    "selectAll": false,
                    "filterTypeObjectId": "9ef922e5-ff0b-408f-b8a3-a6c5928d5d29",
                    "isOnOrAfterTerm": "",
                    "isSelected": false,
                    "isDisable": false,
                    "reportObjectWidth": 150,
                    "isDrill": false,
                    "today": "2021-07-14T04:43:17.496Z",
                    "tableName": "",
                    "expression": "",
                    "derivedRoType": 0,
                    "createdBy": 0,
                    "parentReportObjects": null,
                    "configurationValue": "",
                    "autoCompleteFilterData": "",
                    "autoCompleteFilterList": [],
                    "sourceYear": {
                        "displaytitle": "Select Year",
                        "selectTypeOption": {},
                        "options": [],
                        "selectedoption": ""
                    },
                    "sourceQuarter": {
                        "displaytitle": "Select Quarter",
                        "selectTypeOption": {},
                        "options": [],
                        "selectedoption": ""
                    },
                    "sourceMonth": {
                        "displaytitle": "Select Month",
                        "selectTypeOption": {},
                        "options": [],
                        "selectedoption": ""
                    },
                    "yearDropdown": {
                        "options": [],
                        "selectedOption": {
                            "title": "2021"
                        },
                        "selectedRangeOptions": {
                            "from": {
                                "title": "2021"
                            },
                            "to": {
                                "title": "2021"
                            }
                        },
                        "model": ""
                    },
                    "quarterDropdown": {
                        "options": [],
                        "selectedOption": {},
                        "selectedRangeOptions": {
                            "from": {},
                            "to": {}
                        }
                    },
                    "monthDropdown": {
                        "options": [],
                        "selectedOption": {},
                        "selectedRangeOptions": {
                            "from": {},
                            "to": {}
                        }
                    },
                    "monthArray": [],
                    "quarterArray": [],
                    "pageByProperties": {
                        "pageByOptions": [
                            {
                                "title": "search",
                                "isSelected": false
                            },
                            {
                                "title": "ALL",
                                "isSelected": false
                            }
                        ],
                        "pageByFlag": false,
                        "reportObjectIdentifier": 1,
                        "pageIndexForPageBy": 1,
                        "reportRequestKeySavingForPagination": {},
                        "noOfTimesPaginationIsPossible": 1,
                        "selectedValue": "All",
                        "addEvent": false
                    },
                    "filterIdentifierType": 0,
                    "Level": 1,
                    "isCoupled": true,
                    "isLast": false,
                    "operator": "AND",
                    "showLinkIcon": false,
                    "isGrouped": false,
                    "reportObjectDataType": 5,
                    "formatKey": "",
                    "isLinkActive": false,
                    "isLocationObjectType": false,
                    "isStandardFilterRO": false,
                    "reportDocumentMappingField": "",
                    "isAggregatedDerivedMeasure": false
                },
                "sortOrder": 0,
                "sortType": 1
            },
            {
                "reportObject": {
                    "displayName": "Level 2 Category",
                    "reportObjectName": "Level 2 Category",
                    "isDerived": false,
                    "isFilterable": false,
                    "isTransactional": false,
                    "layoutArea": 0,
                    "objectGroupName": "category",
                    "reportObjectId": "ce0122d8-1715-407e-91c7-db4d3ffe2a12",
                    "reportObjectType": 1,
                    "sequenceNumber": 65,
                    "isDrillToTransactional": true,
                    "drillTransactionOrder": 7,
                    "isSelectAll": false,
                    "partialSelect": false,
                    "showSelected": false,
                    "filterBy": 1,
                    "filterTabInfo": "",
                    "filterRadioOperator": 0,
                    "filterConditionValue": "",
                    "filterConditionRangeValue": {
                        "from": "",
                        "to": ""
                    },
                    "filterConditionOperator": -1,
                    "selectAllTxt": "All",
                    "filterList": [],
                    "preCanValues": [],
                    "filterCount": -1,
                    "isFilterDataLoaded": false,
                    "filterType": 1,
                    "currentDrop": "ROW",
                    "isFiltered": false,
                    "filterConditions": [],
                    "periodFilterConditions": [],
                    "filterConditionText": "",
                    "filterSearchText": "",
                    "selectedFilterList": [],
                    "filterValueSet": false,
                    "setPeriodFilterData": false,
                    "filterSelSet": false,
                    "filterCdnSet": false,
                    "allRequiredData": [],
                    "selectAll": false,
                    "filterTypeObjectId": "10efc3f0-7ec5-4d8f-b6da-0b476d07629d",
                    "isOnOrAfterTerm": "",
                    "isSelected": false,
                    "isDisable": false,
                    "reportObjectWidth": 150,
                    "isDrill": false,
                    "today": "2021-07-14T04:43:17.495Z",
                    "tableName": "",
                    "expression": "",
                    "derivedRoType": 0,
                    "createdBy": 0,
                    "parentReportObjects": null,
                    "configurationValue": "",
                    "autoCompleteFilterData": "",
                    "autoCompleteFilterList": [],
                    "sourceYear": {
                        "displaytitle": "Select Year",
                        "selectTypeOption": {},
                        "options": [],
                        "selectedoption": ""
                    },
                    "sourceQuarter": {
                        "displaytitle": "Select Quarter",
                        "selectTypeOption": {},
                        "options": [],
                        "selectedoption": ""
                    },
                    "sourceMonth": {
                        "displaytitle": "Select Month",
                        "selectTypeOption": {},
                        "options": [],
                        "selectedoption": ""
                    },
                    "yearDropdown": {
                        "options": [],
                        "selectedOption": {
                            "title": "2021"
                        },
                        "selectedRangeOptions": {
                            "from": {
                                "title": "2021"
                            },
                            "to": {
                                "title": "2021"
                            }
                        },
                        "model": ""
                    },
                    "quarterDropdown": {
                        "options": [],
                        "selectedOption": {},
                        "selectedRangeOptions": {
                            "from": {},
                            "to": {}
                        }
                    },
                    "monthDropdown": {
                        "options": [],
                        "selectedOption": {},
                        "selectedRangeOptions": {
                            "from": {},
                            "to": {}
                        }
                    },
                    "monthArray": [],
                    "quarterArray": [],
                    "pageByProperties": {
                        "pageByOptions": [
                            {
                                "title": "search",
                                "isSelected": false
                            },
                            {
                                "title": "ALL",
                                "isSelected": false
                            }
                        ],
                        "pageByFlag": false,
                        "reportObjectIdentifier": 1,
                        "pageIndexForPageBy": 1,
                        "reportRequestKeySavingForPagination": {},
                        "noOfTimesPaginationIsPossible": 1,
                        "selectedValue": "All",
                        "addEvent": false
                    },
                    "filterIdentifierType": 0,
                    "Level": 1,
                    "isCoupled": true,
                    "isLast": false,
                    "operator": "AND",
                    "showLinkIcon": false,
                    "isGrouped": false,
                    "reportObjectDataType": 0,
                    "formatKey": "",
                    "isLinkActive": false,
                    "isLocationObjectType": false,
                    "isStandardFilterRO": false,
                    "reportDocumentMappingField": "",
                    "isAggregatedDerivedMeasure": false,
                    "$$hashKey": "object:967"
                },
                "sortOrder": 1,
                "sortType": 0
            }
        ],
        "dataSourceObjectId": "329faaf4-0a97-4190-b8bc-a3355b4c717f",
        "dataSourceType": 0,
        "lstReportObject": [
            {
                "displayName": "Level 2 Category",
                "reportObjectName": "Level 2 Category",
                "isDerived": false,
                "isFilterable": false,
                "isTransactional": false,
                "layoutArea": 0,
                "objectGroupName": "category",
                "reportObjectId": "ce0122d8-1715-407e-91c7-db4d3ffe2a12",
                "reportObjectType": 1,
                "sequenceNumber": 65,
                "isDrillToTransactional": true,
                "drillTransactionOrder": 7,
                "isSelectAll": false,
                "partialSelect": false,
                "showSelected": false,
                "filterBy": 1,
                "filterTabInfo": "",
                "filterRadioOperator": 0,
                "filterConditionValue": "",
                "filterConditionRangeValue": {
                    "from": "",
                    "to": ""
                },
                "filterConditionOperator": -1,
                "selectAllTxt": "All",
                "filterList": [],
                "preCanValues": [],
                "filterCount": -1,
                "isFilterDataLoaded": false,
                "filterType": 1,
                "currentDrop": "ROW",
                "isFiltered": false,
                "filterConditions": [],
                "periodFilterConditions": [],
                "filterConditionText": "",
                "filterSearchText": "",
                "selectedFilterList": [],
                "filterValueSet": false,
                "setPeriodFilterData": false,
                "filterSelSet": false,
                "filterCdnSet": false,
                "allRequiredData": [],
                "selectAll": false,
                "filterTypeObjectId": "10efc3f0-7ec5-4d8f-b6da-0b476d07629d",
                "isOnOrAfterTerm": "",
                "isSelected": false,
                "isDisable": false,
                "reportObjectWidth": 150,
                "isDrill": false,
                "today": "2021-07-14T04:43:17.495Z",
                "tableName": "",
                "expression": "",
                "derivedRoType": 0,
                "createdBy": 0,
                "parentReportObjects": null,
                "configurationValue": "",
                "autoCompleteFilterData": "",
                "autoCompleteFilterList": [],
                "sourceYear": {
                    "displaytitle": "Select Year",
                    "selectTypeOption": {},
                    "options": [],
                    "selectedoption": ""
                },
                "sourceQuarter": {
                    "displaytitle": "Select Quarter",
                    "selectTypeOption": {},
                    "options": [],
                    "selectedoption": ""
                },
                "sourceMonth": {
                    "displaytitle": "Select Month",
                    "selectTypeOption": {},
                    "options": [],
                    "selectedoption": ""
                },
                "yearDropdown": {
                    "options": [],
                    "selectedOption": {
                        "title": "2021"
                    },
                    "selectedRangeOptions": {
                        "from": {
                            "title": "2021"
                        },
                        "to": {
                            "title": "2021"
                        }
                    },
                    "model": ""
                },
                "quarterDropdown": {
                    "options": [],
                    "selectedOption": {},
                    "selectedRangeOptions": {
                        "from": {},
                        "to": {}
                    }
                },
                "monthDropdown": {
                    "options": [],
                    "selectedOption": {},
                    "selectedRangeOptions": {
                        "from": {},
                        "to": {}
                    }
                },
                "monthArray": [],
                "quarterArray": [],
                "pageByProperties": {
                    "pageByOptions": [
                        {
                            "title": "search",
                            "isSelected": false
                        },
                        {
                            "title": "ALL",
                            "isSelected": false
                        }
                    ],
                    "pageByFlag": false,
                    "reportObjectIdentifier": 1,
                    "pageIndexForPageBy": 1,
                    "reportRequestKeySavingForPagination": {},
                    "noOfTimesPaginationIsPossible": 1,
                    "selectedValue": "All",
                    "addEvent": false
                },
                "filterIdentifierType": 0,
                "Level": 1,
                "isCoupled": true,
                "isLast": false,
                "operator": "AND",
                "showLinkIcon": false,
                "isGrouped": false,
                "reportObjectDataType": 0,
                "formatKey": "",
                "isLinkActive": false,
                "isLocationObjectType": false,
                "isStandardFilterRO": false,
                "reportDocumentMappingField": "",
                "isAggregatedDerivedMeasure": false,
                "$$hashKey": "object:1311"
            },
            {
                "displayName": "Spend In USD",
                "reportObjectName": "Spend In USD",
                "isDerived": false,
                "isFilterable": false,
                "isTransactional": false,
                "layoutArea": 2,
                "objectGroupName": "Measure",
                "reportObjectId": "7f54e1b6-fac9-4f8a-b092-aa9a8ee984bb",
                "reportObjectType": 0,
                "sequenceNumber": 71,
                "isDrillToTransactional": false,
                "drillTransactionOrder": 3,
                "isSelectAll": false,
                "partialSelect": false,
                "showSelected": false,
                "filterBy": 1,
                "filterTabInfo": "",
                "filterRadioOperator": 0,
                "filterConditionValue": "",
                "filterConditionRangeValue": {
                    "from": "",
                    "to": ""
                },
                "filterConditionOperator": -1,
                "selectAllTxt": "All",
                "filterList": [],
                "preCanValues": [],
                "filterCount": -1,
                "isFilterDataLoaded": false,
                "filterType": 2,
                "currentDrop": "VALUE",
                "isFiltered": false,
                "filterConditions": [],
                "periodFilterConditions": [],
                "filterConditionText": "",
                "filterSearchText": "",
                "selectedFilterList": [],
                "filterValueSet": false,
                "setPeriodFilterData": false,
                "filterSelSet": false,
                "filterCdnSet": false,
                "allRequiredData": [],
                "selectAll": false,
                "filterTypeObjectId": "9ef922e5-ff0b-408f-b8a3-a6c5928d5d29",
                "isOnOrAfterTerm": "",
                "isSelected": false,
                "isDisable": false,
                "reportObjectWidth": 150,
                "isDrill": false,
                "today": "2021-07-14T04:43:17.496Z",
                "tableName": "",
                "expression": "",
                "derivedRoType": 0,
                "createdBy": 0,
                "parentReportObjects": null,
                "configurationValue": "",
                "autoCompleteFilterData": "",
                "autoCompleteFilterList": [],
                "sourceYear": {
                    "displaytitle": "Select Year",
                    "selectTypeOption": {},
                    "options": [],
                    "selectedoption": ""
                },
                "sourceQuarter": {
                    "displaytitle": "Select Quarter",
                    "selectTypeOption": {},
                    "options": [],
                    "selectedoption": ""
                },
                "sourceMonth": {
                    "displaytitle": "Select Month",
                    "selectTypeOption": {},
                    "options": [],
                    "selectedoption": ""
                },
                "yearDropdown": {
                    "options": [],
                    "selectedOption": {
                        "title": "2021"
                    },
                    "selectedRangeOptions": {
                        "from": {
                            "title": "2021"
                        },
                        "to": {
                            "title": "2021"
                        }
                    },
                    "model": ""
                },
                "quarterDropdown": {
                    "options": [],
                    "selectedOption": {},
                    "selectedRangeOptions": {
                        "from": {},
                        "to": {}
                    }
                },
                "monthDropdown": {
                    "options": [],
                    "selectedOption": {},
                    "selectedRangeOptions": {
                        "from": {},
                        "to": {}
                    }
                },
                "monthArray": [],
                "quarterArray": [],
                "pageByProperties": {
                    "pageByOptions": [
                        {
                            "title": "search",
                            "isSelected": false
                        },
                        {
                            "title": "ALL",
                            "isSelected": false
                        }
                    ],
                    "pageByFlag": false,
                    "reportObjectIdentifier": 1,
                    "pageIndexForPageBy": 1,
                    "reportRequestKeySavingForPagination": {},
                    "noOfTimesPaginationIsPossible": 1,
                    "selectedValue": "All",
                    "addEvent": false
                },
                "filterIdentifierType": 0,
                "Level": 1,
                "isCoupled": true,
                "isLast": false,
                "operator": "AND",
                "showLinkIcon": false,
                "isGrouped": false,
                "reportObjectDataType": 5,
                "formatKey": "",
                "isLinkActive": false,
                "isLocationObjectType": false,
                "isStandardFilterRO": false,
                "reportDocumentMappingField": "",
                "isAggregatedDerivedMeasure": false
            }
        ],
        "lstFilterReportObject": [],
        "reportViewType": -1,
        "reportRequestKey": "bd609d57-8984-4945-879d-10ab7504ef7010204000002102_0",
        "isJumpToState": false
    },
    data: {
        "NextSetRequestData": null,
        "FirstRowDataForEachPage": [],
        "type": "jpeg",
        "scale": 10,
        "options": {
            "chart": {
                "plotBackgroundColor": null,
                "plotBorderWidth": null,
                "plotShadow": false,
                "type": "pie"
            },
            "title": {
                "text": "chart 1"
            },
            "tooltip": {
                "pointFormat": "{series.name}: <b>{point.percentage:.1f}%</b>"
            },
            "accessibility": {
                "point": {
                    "valueSuffix": "%"
                }
            },
            "plotOptions": {
                "pie": {
                    "allowPointSelect": true,
                    "cursor": "pointer",
                    "dataLabels": {
                        "enabled": true,
                        "format": "<b>{point.name}</b>: {point.percentage:.1f} %"
                    }
                }
            }
        },

        "Data": [
            {
                "Level 2 Category": "CORPORATE SERVICES",
                "Spend In USD": 1494099.9459773074
            },
            {
                "Level 2 Category": "BUILDING MATERIALS & PRODUCTS",
                "Spend In USD": 1364938.6020859643
            },
            {
                "Level 2 Category": "METALS",
                "Spend In USD": 515913.69122623495
            },
            {
                "Level 2 Category": "PLASTICS",
                "Spend In USD": 325166.33267992089
            },
            {
                "Level 2 Category": "OTHER",
                "Spend In USD": 290217.51559143496
            },
            {
                "Level 2 Category": "WOODS",
                "Spend In USD": 253743.28355900015
            },
            {
                "Level 2 Category": "PROFESSIONAL SERVICES",
                "Spend In USD": 129396.41
            },
            {
                "Level 2 Category": "PACKAGING",
                "Spend In USD": 124933.41718817897
            },
            {
                "Level 2 Category": "LOGISTICS",
                "Spend In USD": 114358.31277250816
            },
            {
                "Level 2 Category": "CHEMICALS",
                "Spend In USD": 113085.09000000001
            },
            {
                "Level 2 Category": "INDUSTRIAL SUPPLIES/ MRO",
                "Spend In USD": 98622.368510550223
            },
            {
                "Level 2 Category": "TRAVEL & ENTERTAINMENT",
                "Spend In USD": 87080.741011642051
            },
            {
                "Level 2 Category": "SALES & MARKETING",
                "Spend In USD": 44720.010830999985
            },
            {
                "Level 2 Category": "MACHINERY & EQUIPMENT",
                "Spend In USD": 40898.119640000012
            },
            {
                "Level 2 Category": "ENERGY & UTILITIES",
                "Spend In USD": 36290.181743999994
            },
            {
                "Level 2 Category": "IT",
                "Spend In USD": 20485.5611725
            },
            {
                "Level 2 Category": "INTERCOMPANY",
                "Spend In USD": 7590.0
            },
            {
                "Level 2 Category": "(QA IN PROGRESS)",
                "Spend In USD": 1927.0
            },
            {
                "Level 2 Category": "SALARIES/ BENEFITS/ ALLOWANCES",
                "Spend In USD": 1900.0
            },
            {
                "Level 2 Category": "REBATES/ BONUS",
                "Spend In USD": 1536.880185
            },
            {
                "Level 2 Category": "CONTRACTOR SERVICES",
                "Spend In USD": 1350.98
            },
            {
                "Level 2 Category": "OTHER NON PROCURABLE",
                "Spend In USD": 760.26
            },
            {
                "Level 2 Category": "MISCELLANEOUS EXPENSES",
                "Spend In USD": 26.07
            }
        ],
        "PageSize": 0,
        "TotalRowCount": 0,
        "GrandTotal": null
    }
}

// var rowObjects = all the contents of label 
var getRowObjects = () => {
    var rowObjects = [];
    var nameToFindInData = "";
    for (let x of objToSend.reportObjDetails["lstReportObject"]) {
        if (x["currentDrop"] == "ROW") {
            nameToFindInData = x["reportObjectName"];
            if(objToSend.chartType == "Line Chart")
                continue;
            break;
        }
    }
    for (let x of objToSend.data["Data"]) {
        rowObjects.push(x[nameToFindInData]);
    }
    return rowObjects;
}
var rowObjects = getRowObjects();

// for pie charts column object is blank/null/undefined  
var getColumnObjects = () => {
    var colObjects = [];
    var nameToFindInData = "";
    for (let x of objToSend.reportObjDetails["lstReportObject"]) {
        if (x["currentDrop"] == "COLUMN") {
            nameToFindInData = x["reportObjectName"]
            break;
        }
    }
    for (let x of objToSend.data["Data"]) {
        rowObjects.push(x[nameToFindInData]);
    }
    return rowObjects;
}
var columnObjects = getColumnObjects();

// entire data 
var getCurrentJson = ()=>{
    var currentJson = objToSend.data["Data"];
    var nameToFindInData = "";
    for (let x of objToSend.reportObjDetails["lstReportObject"]) {
        if (x["currentDrop"] == "ROW") {
            nameToFindInData = x["reportObjectName"]
            break;
        }
    }
    var obj = {
        columnObjects,
        item : nameToFindInData,
        rowObjects
    }
    currentJson.push(obj);
    // console.log(currentJson);
    return currentJson;
}
var currentJson = getCurrentJson();

// var metricObjects = report objects in reportDetailsObj with currentDrop as VALUE 
var getMetrcObjects = ()=>{
    var metricObjects = [];
    
    for (let x of objToSend.reportObjDetails["lstReportObject"]) {
        if (x["currentDrop"] == "VALUE") {
            metricObjects.push(x["reportObjectName"]);
        }
    }

    return metricObjects;
}
var metricObjects = getMetrcObjects()

var rowelIndex = 0;

var scope = {
    showDataLabels : false,
    // shayad this stores array of rows shayad 
    chartstates : (function getchartStates(){
        var rowObjects = [];
        var nameToFindInData = "";
        for (let x of objToSend.reportObjDetails["lstReportObject"]) {
            if (x["currentDrop"] == "ROW") {
                nameToFindInData = x["reportObjectName"];
                
                break;
            }
        }
        for (let x of objToSend.data["Data"]) {
            rowObjects.push(x[nameToFindInData]);
        }
        return rowObjects;
    }()), 
    activeChart : {
        name : objToSend.chartType
    },
    valueList : (function getValueList(){
        var valueList = [];
        
        for (let x of objToSend.reportObjDetails["lstSortReportObject"]) {
            if (x["reportObject"]["currentDrop"] == "VALUE") {
                var obj = {
                    reportObject : x["reportObject"]
                }
                valueList.push(x["reportObject"]);
            }
        }
        return valueList;
    }()),
    rowList : (function getRowList(){
        var rowList = [];
        
        for (let x of objToSend.reportObjDetails["lstSortReportObject"]) {
            if (x["reportObject"]["currentDrop"] == "ROW") {
                rowList.push(x["reportObject"]);
            }
        }
        return rowList;
    }()),
    columnList : []

}

var createXAxis = function () {
    var data = [];
    if ((columnObjects.length > 0 && rowObjects.length == 0
        && (scope.activeChart.name == "Stacked Column Chart" || scope.activeChart.name == "Stacked Bar Chart" || scope.activeChart.name == "Line Chart" || scope.activeChart.name == "100% Stacked Bar Chart" || scope.activeChart.name == "100% Stacked Column Chart"))) {
        data.push("");
    }
    else if (columnObjects.length) {
        if (rowObjects.length == 0) {
            for (var i = 0; i < columnObjects.length; i++) {
                data.push(columnObjects[i]);
            }
        }
        else {
            for (var i = 0; i < rowObjects.length; i++) {
                data.push(rowObjects[i]);
            }
            if (scope.activeChart.name == "Waterfall Chart") {
                data.push("Total");
            }
        }
    }
    // this runs-> 
    else {
        currentJson[currentJson.length - 1].rowObjects.forEach(function (value, key) {
            data.push(value);

            // data contains all the labels in form of array 
            // 0: "CORPORATE SERVICES"
            // 1: "BUILDING MATERIALS & PRODUCTS"
            // 2: "METALS".....
        });
        if (scope.activeChart.name == "Waterfall Chart") {
            data.push("Total");
        }
    }
    return data;
};

var createYAxis = function () {
    var data = [];
    if ((columnObjects.length >= 1 && rowObjects.length >= 1
        && (scope.activeChart.name == "Heat Map"))) {
        for (var i = 0; i < columnObjects.length; i++) {
            data.push(columnObjects[i]);
        }
    }
    return data;
};

var getPieChartPlotOptions = function () {
    var options = {};
    var centerDonut = ['50%', '75%'];
    var centerPie = ['50%', '50%'];
    if (scope.activeChart.name == 'Donut Chart') {
        options = {
            'startAngle': -90,
            'endAngle': 90,
            'center': centerDonut,
        };
    }
    else if (scope.activeChart.name == "Pie Chart") {
        options = {
            'startAngle': 0,
            'endAngle': 360,
            'center': centerPie,
            point: {
                // events: {
                //     legendItemClick: function () {
                //         var chart = this.series.chart;
                //         var series = chart.series;
                //         var actualPoint = this.x;
                //         series.forEach(function (series) {
                //             series.data.forEach(function (point) {
                //                 if (point.x === actualPoint) {
                //                     if (point.visible) {
                //                         point.setVisible(false);
                //                     }
                //                     else {
                //                         point.setVisible(true);
                //                     }
                //                 }
                //             });
                //         });
                //         return false;
                //     }
                // }
            },
        };
    }
    return options;
};

var createGraphTitle = function (rowelIndex) {
    var data = "";
    // scope.valueList.length => number of report objects in reportDetailsObj with currentDrop as VALUE
    for (var i = 0; i < scope.valueList.length; i++) {
        data += i != scope.valueList.length - 1 ? (scope.valueList[i].displayName + " and ") : (scope.valueList[i].displayName);
    }

    // scope.rowList => number of report objects in reportDetailsObj with currentDrop as ROW
    // scope.columnList.length 0 as column list does not exist in pie chart 
    if (scope.rowList.length > 0 || scope.columnList.length > 0)
        data += ' by ';
    if (scope.rowList.length)
        data += scope.rowList[rowelIndex].displayName;
    if (scope.columnList[0])
        if (scope.rowList.length == 0)
            data += (scope.columnList[0].displayName);
        else
            data += (' and ' + scope.columnList[0].displayName);
    return data;
};

var getDistanceForPieChart = function (valulist) {
    var distance = [];
    switch (valulist.length) {
        case 1:
            {
                return distance = ['30%'];
            }
        case 2:
            {
                return distance = ['50%', '30%'];
            }
        case 3:
            {
                return distance = ['70%', '50%', '30%'];
            }
        case 4:
            {
                return distance = ['90%', '70%', '50%', '30%'];
            }
    }
};



var createSeriesData = function (seriesObject, i) {
    {
        var lstdata = [];
        var data = [];
        // var reportObject = { configurationValue: "" };
        if (scope.columnList.length && scope.rowList.length) {
            reportObject = _.find(scope.reportObjDetails.lstReportObject, { displayName: scope.valueList[0].reportObjectName });
            for (var j = 0; j < currentJson.length - 1; j++) {
                if (currentJson[j][scope.columnList[0].reportObjectName] == seriesObject[i]) {
                    for (var x = 0; x < currentJson[currentJson.length - 1].rowObjects.length; x++) {
                        if (lstdata.length < currentJson[currentJson.length - 1].rowObjects.length)
                            lstdata.push(null);
                        if (currentJson[currentJson.length - 1].rowObjects[x] == currentJson[j][scope.rowList[rowelIndex].reportObjectName]) {
                            lstdata[x] = (currentJson[j][scope.valueList[0].reportObjectName]);
                        }
                    }
                }
            }
            data = lstdata;
        }
        else if ((columnObjects.length > 0 && rowObjects.length == 0
            && (scope.activeChart.name == "Stacked Column Chart" || scope.activeChart.name == "Line Chart"))) {
            data.push(currentJson[i][metricObjects[0]]);
            reportObject = _.find(scope.reportObjDetails.lstReportObject, { displayName: metricObjects[0] });
        }
        else if (scope.activeChart.name == "Multiple Axis Chart") {
            for (var j = 0; j < currentJson.length - 1; j++) {
                data.push(currentJson[j][metricObjects[i]]);
            }
            reportObject = _.find(scope.reportObjDetails.lstReportObject, { displayName: metricObjects[i] });
        }
        else {

            // report object as of now is not neede 

            // reportObject = _.find(scope.reportObjDetails.lstReportObject, { displayName: seriesObject[i] });
           
           
            
            for (var j_1 = 0; j_1 < currentJson.length - 1; j_1++) {
                var obj = {};
                if (scope.columnList.length) {
                    obj["name"] = currentJson[currentJson.length - 1].columnObject[j_1];

                    // no need to specify color as of noww 

                    // if (scope.activeChart.name == report.resources.ChartType.PieChart ||
                    //     scope.activeChart.name == report.resources.ChartType.DonutChart)
                    //     obj["color"] = getSeriesColor(obj["name"], j_1);
                }
                else {
                    obj["name"] = currentJson[currentJson.length - 1].rowObjects[j_1];
                    // if (scope.activeChart.name == report.resources.ChartType.PieChart ||
                    //     scope.activeChart.name == report.resources.ChartType.DonutChart)
                    //     obj["color"] = getSeriesColor(obj["name"], j_1);
                }
                obj["y"] = currentJson[j_1][metricObjects[i]];
                data.push(obj);
            }
        }
        // report.resources.ChartType.PieChart = "Pie Chart"
        if (scope.activeChart.name == "Pie Chart") {
            var totalSum_1 = 0;
            data.map(function (obj) { totalSum_1 = totalSum_1 + obj.y; });
            data.map(function (obj) { obj.name = obj.name + ': ' + ((obj.y / totalSum_1) * 100).toFixed(2) + '%'; });
            // _.each(data, function (obj) { totalSum_1 = totalSum_1 + obj.y; });
            // _.each(data, function (obj) { obj.name = obj.name + ': ' + ((obj.y / totalSum_1) * 100).toFixed(2) + '%'; });
        }
        // var configVal = getWijmoConfigurationFormatCallback(reportObject.configurationValue, reportObject.filterType);
        var configVal = ""
        // if ((configVal != undefined && configVal[0] == 'p') || reportObject.formatKey == report.resources.CommonConstants.Percent) {
        //     angular.forEach(data, function (value, index) {
        //         if (value != null) {
        //             if (value.hasOwnProperty('y')) {
        //                 value.y = value.y * 100;
        //             }
        //             else {
        //                 data[index] = value * 100;
        //             }
        //         }
        //     }, data);
        // }
        return data;
    }
};



var getChartJson = function () {
    scope.showDataLabels = false; // false 
    
    // scope.chartstates.length = 1
    if (scope.chartstates.length != 0)
        rowelIndex = scope.chartstates.length - 1; // rowelIndex
    
    rowelIndex = 0    
    var x = {
        xAxis: {
            categories: createXAxis(),
            crosshair: {
                color: "none"
            },
            // labels: {
            //     formatter: function () {
            //         if (typeof this.value === 'string') {
            //             return (this.value.length < report.resources.chartLabelSize) ? this.value : this.value.substring(0, report.resources.chartLabelSize - 1) + '...';
            //         }
            //         return this.value;
            //     }
            // }
        },
        yAxis: (function () {
            return {
                // max: masterJson[rowelIndex].maxYAxis.length ? masterJson[rowelIndex].maxYAxis[0] : null, // null
                // min: masterJson[rowelIndex].minYAxis.length ? masterJson[rowelIndex].minYAxis[0]  : null,  // null
                max: null,
                min: null,
                // labels: {
                //     formatter: function () {
                //         // Nine Zeroes for Billions
                //         return Math.abs(this.value) >= 1.0e+9
                //             ? utilities.globalizeNumber(Math.sign(this.value) * Math.abs(this.value) / 1.0e+9) + "B"
                //             : Math.abs(this.value) >= 1.0e+6
                //                 ? utilities.globalizeNumber(Math.sign(this.value) * Math.abs(this.value) / 1.0e+6) + "M"
                //                 : Math.abs(this.value) >= 1.0e+3
                //                     ? utilities.globalizeNumber(Math.sign(this.value) * Math.abs(this.value) / 1.0e+3) + "K"
                //                     : utilities.globalizeNumber(this.value);
                //     }
                // }
            };
        }()),
        scrollbar: { enabled: false, showFull: false },
        title: {
            align: 'left',
            text: ''
        },
        chart: {
            type: 'pie',
            zoomType: 'x',
            allowPointSelect: true,
            allowOverlap: true,
        },

        initChart: false,
        legend: {
            itemDistance: 8,
            maxHeight: 40,
            layout: 'horizontal',
            alignColumns: false,
            navigation: {
                activeColor: '#3E576F',
                animation: true,
                arrowSize: 12,
                inactiveColor: '#CCC',
                style: {
                    fontWeight: 'bold',
                    color: '#333',
                    fontSize: '12px'
                }
            },

            // yeh check karlena ki zaroorat hai ya nahi

            // labelFormatter: scope.activeChart.name == "Pie Chart" ? function () {
            //     return this.name.slice(0, this.name.lastIndexOf(":"));
            // } : function () { return this.name; }
        },
        credits: {
            enabled: false
        },
        plotOptions: {
            series: {
                states: {
                    inactive: {
                        opacity: 1
                    }
                },
                dataLabels: {
                    // enabled: scope.showDataLabels,
                    enabled : false,
                    style: {
                        fontWeight: 'normal',
                        textShadow: 'none',
                        // fontSize: scope.selectedFontSize + "px"
                        fontSize: '12px'
                    },
                }
            },
            pie: getPieChartPlotOptions()
        },
        exporting: {
            allowHTML: true,
            enabled: false,
            chartOptions: {
                chart: {
                    height: 1000,
                    width: 1000
                },
                legend: {
                    navigation: {
                        enabled: false
                    },
                    alignColumns: true
                },
                title: {
                    text: createGraphTitle(rowelIndex),
                }
            }
        },
        // lang: {
        //     decimalPoint: utilities.globalizeDecimalOptionsForChart(),
        //     thousandsSep: utilities.globalizeThousandsSepOptionsForChart()
        // },
        subtitle: {
            text: (function () {
                var data = "";
                if (scope.activeChart.name == "Pie Chart" || scope.activeChart.name == "Donut") {
                    data = "";
                }
                
                //var data = 'Currently Viewing : ';
                //angular.forEach(scope.chartstates, function (value, key) { data += value.itemName + ' > '; });
                return data;
            }()),
            align: 'left'
        },
        init: false,
        series: (function () {
            if (scope.activeChart.name == 'Pie Chart') {
                var innerSizeForPie = ['80%', '75%', '70%', '65%'];
                var sizeForPie = ['100%', '80%', '60%', '40%'];
            }
            var temp = [];
            var seriesObject;
            if ((columnObjects.length > 0 && rowObjects.length == 0
                && (scope.activeChart.name == "Stacked Column Chart" || scope.activeChart.name == "Line Chart"))) {
                seriesObject = columnObjects;
            }
            else if (rowObjects.length != 0)
                seriesObject = columnObjects.length ? columnObjects : metricObjects;
            else if (rowObjects.length == 0)
                seriesObject = metricObjects;
            var currentObj;
            var _loop_2 = function () {
                // if ((columnObjects.length > 0 && rowObjects.length == 0
                //     && (scope.activeChart.name == "Stacked Column Chart" || scope.activeChart.name == "Line Chart"))
                //     || scope.valueList.length == 1)
                //     currentObj = _.find(scope.valueList, function (item) { return item.reportObjectName == metricObjects; });
                // else
                //     currentObj = _.find(scope.valueList, function (item) { return item.reportObjectName == seriesObject[i]; });
                temp[i] = {};
                // var currenyBeforeAmount = utilities.getCurrencySymbolLocation();  true hoga
                // var configFormat = getWijmoConfigurationFormatCallback(currentObj.configurationValue, currentObj.filterType);
                // temp[i].tooltip = {
                //     headerFormat: '<span style="font-size:10px">' + (scope.columnList.length > 0 ? scope.columnList[0].reportObjectName + '<br/>' : "") + '<span style="font-size:10px">{point.key}<br/></span></span>',
                //     footerFormat: '</table>',
                //     shared: true,
                //     useHTML: true,
                //     format: configFormat,
                //     formatKey: currentObj.formatKey,
                //     currenyBeforeAmount: currenyBeforeAmount,
                //     pointFormatter: function () {
                //         return '<table><tr><td style="padding:0">' + this.series.name + ':</td>' +
                //             (this.series.userOptions.tooltip.formatKey != "" && this.series.userOptions.tooltip.formatKey != null && this.series.userOptions.tooltip.formatKey != report.resources.CommonConstants.Percent && this.series.userOptions.tooltip && this.series.userOptions.tooltip.format == "" ? '<td><b>' + report.resources.FormatType[this.series.userOptions.tooltip.formatKey] + '</b></td>' : "") +
                //             '<td style="padding:0"><b>' + utilities.formatChartTooltip(this.y, this.series.userOptions.tooltip.format) + '</b></td></tr>' +
                //             (this.series.userOptions.tooltip.formatKey != "" && this.series.userOptions.tooltip.formatKey != null && this.series.userOptions.tooltip.formatKey && this.series.userOptions.tooltip.format == "" && (this.series.userOptions.tooltip.formatKey == report.resources.CommonConstants.Percent || !this.series.userOptions.tooltip.currenyBeforeAmount) ? '<td><b>' + report.resources.FormatType[this.series.userOptions.tooltip.formatKey] + '</b></td>' : "");
                //     }
                // };
                temp[i].cursor = 'pointer';
                temp[i].type = scope.activeChart.name;
                if ((scope.activeChart.name == 'Line Chart') || (scope.activeChart.name == 'Column Chart')) {
                    temp[i].dataLabels = {
                        enabled: scope.showDataLabels,
                        allowOverlap: true,
                        crop: false,
                        overflow: 'none',
                        useHTML: true,
                        color: '#000000',
                        states: {
                            inactive: {
                                opacity: 1
                            }
                        },
                        // formatter: function () {
                        //     if ((scope.showDataLabels) && !scope.renderOnPopup) {
                        //         return (this.series.userOptions.tooltip.formatKey != "" && this.series.userOptions.tooltip.formatKey != null && this.series.userOptions.tooltip.formatKey != report.resources.CommonConstants.Percent && this.series.userOptions.tooltip && this.series.userOptions.tooltip.format == "" ? '<td><b>' + report.resources.FormatType[this.series.userOptions.tooltip.formatKey] + '</b></td>' : "") +
                        //             utilities.formatChartTooltip(this.y, configFormat) +
                        //             (this.series.userOptions.tooltip.formatKey != "" && this.series.userOptions.tooltip.formatKey != null && this.series.userOptions.tooltip.formatKey && this.series.userOptions.tooltip.format == "" && (this.series.userOptions.tooltip.formatKey == report.resources.CommonConstants.Percent || !this.series.userOptions.tooltip.currenyBeforeAmount) ? '<td><b>' + report.resources.FormatType[this.series.userOptions.tooltip.formatKey] + '</b></td>' : "");
                        //     }
                        // }
                    };
                }
                else {
                    temp[i].dataLabels = {
                        enabled: true,
                        distance: scope.activeChart.name == "Pie Chart" ? getDistanceForPieChart(scope.valueList)[i] : 30,
                        allowOverlap: true,
                        crop: false,
                        overflow: 'none',
                        useHTML: true,
                        // formatter: function () {
                        //     return scope.showDataLabels ? (this.series.userOptions.tooltip.formatKey != "" && this.series.userOptions.tooltip.formatKey != null && this.series.userOptions.tooltip.formatKey != report.resources.CommonConstants.Percent && this.series.userOptions.tooltip && this.series.userOptions.tooltip.format == "" ? '<td><b>' + report.resources.FormatType[this.series.userOptions.tooltip.formatKey] + '</b></td>' : "") +
                        //         utilities.formatChartTooltip(this.y, configFormat) + (this.series.userOptions.tooltip.formatKey != "" && this.series.userOptions.tooltip.formatKey != null && this.series.userOptions.tooltip.formatKey && this.series.userOptions.tooltip.format == "" && (this.series.userOptions.tooltip.formatKey == report.resources.CommonConstants.Percent || !this.series.userOptions.tooltip.currenyBeforeAmount) ? '<td><b>' + report.resources.FormatType[this.series.userOptions.tooltip.formatKey] + '</b></td>' : "")
                        //         : (scope.activeChart.name == 'Donut Chart' ? this.percentage.toFixed(2) + "%" : this.key.substring(this.key.indexOf(":") + 1));
                        // }
                    };
                }
                if (scope.activeChart.name == "Donut Chart") {
                    temp[i].innerSize = '50%';
                }
                if (scope.activeChart.name == 'stColumn') {
                    temp[i].type = "column";
                    temp[i].stacking = 'normal';
                }
                if (scope.activeChart.name == "multi") {
                    if (i < metricObjects.length) {
                        temp[i].yAxis = i;
                    }
                    temp[i].type = "column";
                    if (i > 0) {
                        temp[i].type = "spline";
                        temp[i].dashStyle = i > 1 ? 'shortdot' : "";
                    }
                }
                temp[i].name = seriesObject[i];
                // if (scope.activeChart.name != "Pie Chart" && scope.activeChart.name != 'Donut Chart')
                //     temp[i].color = getSeriesColor(seriesObject[i], i);
                temp[i].data = createSeriesData(seriesObject, i);
                if (scope.activeChart.name == "Pie Chart" || scope.activeChart.name == 'Donut Chart') {
                    temp[0].showInLegend = true;
                    if ((scope.rowList.length >= 1 && (scope.valueList.length > 1))) {
                        temp[i].innerSize = innerSizeForPie[i];
                        temp[i].size = sizeForPie[i];
                    }
                }
                // if (!scope.renderOnPopup) {
                //     temp[i].events = {
                //         click: function (e) {
                //             var category = "";
                //             if (scope.activeChart.name == "Pie Chart" || scope.activeChart.name == "Donut Chart") {
                //                 category = e.point.name.split(':')[0];
                //             }
                //             else {
                //                 category = e.point.category;
                //             }
                //             jumpToState(category);
                //             setTimeout(function () {
                //                 scope.$digest();
                //             });
                //         }
                //     };
                // }
            };
            for (var i = 0; i < seriesObject.length; i++) {
                _loop_2();
            }
            console.log(temp[0].data);
            return temp;
        }())
    }; //Modified By: Sumit Kumar, ModifiedDate: 03/06/2020, Modified Reason: CLI-151471 and Display Lengend full text value dynamically control by highchart only.
    // legendCallback();
    // if (!scope.renderOnPopup) {
    //     scope.highchartsNgTitle = createGraphTitle(rowelIndex);
    //     $('#column-chart-container').highcharts(x);
    // }
    // else {
    //     $("#chart-container-popup").highcharts(x);
    // }
    console.log(x);
}

getChartJson()
module.exports = {
    getChartJson
}


